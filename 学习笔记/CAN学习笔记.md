#### 底盘通信CAN总线协议

控制器局域网CAN（controller area network）属于现场总线的范畴，是一种有效支持分布式控制系统的串行通信网络，用于汽车中各种不同元件之间的通信。

CAN通讯速率与CAN总线长度的关系大致如下图：·

![img](https://camo.githubusercontent.com/421de993f10c3a9de0fc166cbf5d7a4ff5c53f83c29ff3b518f3b0c3ae74737f/68747470733a2f2f706963332e7a68696d672e636f6d2f38302f76322d35613037303737653131323735363836626663646564303164373935623437615f373230772e6a7067)

1.**报文传输**：

- **通讯数据帧**：起始帧、仲裁域、控制域、数据域、校验码域、应答域、结束域
- 错误帧
- 远程帧
- 过载帧

2.**编码格式**：Motorola格式和Intel格式

- **Motorola格式**类似于大端模式，即**高字节存低地址，低字节存高地址**

- **Intel格式**类似于小端模式，即**高字节存高地址，低字节存低地址**

LSB：最低有效位，为一个二进制数字中的第0位（即最低位）

MSB：最高有效位，为一个n位二进制数字中的第n-1位（即最高位）

以一个十六进制数：0x12345678为例，从高字节到低字节依次为12、34、56、78；

- Motorola格式（大端模式）：

低地址— Byte0        Byte1          Byte2          Byte3 —高地址

​                  12              34                 56                78

- Intel格式（小端模式）：

低地址— Byte0        Byte1           Byte2         Byte3 —高地址

​                  78               56                34                12

现在底盘中的通讯协议矩阵-CANA中报文的排列格式均为**Motorola Foward LSB格式**，即以低位**LSB为起始位**，高字节在前，低字节在后，每个字节内从bit0往bit7排，往低字节借位，例子如下：

![img](https://img-blog.csdnimg.cn/dd477e2cc5aa4feba028e15ec080536d.png)

![img](https://img-blog.csdnimg.cn/dc5391e393c744adae2c199a852edde5.png)

